name: restriction_rules
label: 限制规则
icon: filter_criteria
version: 2
enable_dataloader: false
hidden: true
isMetadata: true
paging:
  enabled: false
fields:
  name:
    label: Api 名称
    type: text
    sort_no: 110
    required: true
  object_name:
    type: lookup
    label: 对象
    reference_to: objects
    write_requires_master_read: true
    reference_to_field: name
    required: true
    sort_no: 120
  active:
    label: 启用
    type: boolean
    sort_no: 130
  entry_criteria:
    label: 指定条目条件
    inlineHelpText: "满足此条件时，使用该记录过滤器。语法为 Amis <a href = 'https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/data-mapping' target='_blank'>数据映射</a> 或 <a href = 'https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/expression' target='_blank'>表达式</a>, 例如: \\${global.user.profile =='user'}"
    type: textarea
    is_wide: true
    sort_no: 140
    required: true
  record_filter:
    label: 记录过滤器
    inlineHelpText: "满足指定条目条件时，使用该记录过滤器限制指定的数据。语法为 Amis <a href = 'https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/data-mapping' target='_blank'>数据映射</a> 或 <a href = 'https://aisuda.bce.baidu.com/amis/zh-CN/docs/concepts/expression' target='_blank'>表达式</a>, 例如: \\${[[\"owner\", \"=\", global.userId]]}，更多详情请参考 <a href='https://docs.steedos.com/zh-CN/admin/permissions/restriction-rules' target='_blank'>此文档</a>。"
    type: textarea
    is_wide: true
    sort_no: 150
    required: true
  description:
    label: 描述
    type: textarea
    is_wide: true
    sort_no: 160
  is_system:
    type: boolean
    label: 系统
    # omit: true
    readonly: true
    disabled: true
    visible_on: "{{global.mode ==='read' ? true : false}}"
actions:
  customize:
    label: 自定义
    on: record
list_views:
  all:
    label: 所有
    filter_scope: space
    columns:
      - name
      - object_name
      - active
      - entry_criteria
      - record_filter
      - description
      - is_system
  customize:
    label: 自定义
    filters:
      - ["is_system","<>",true]
    filter_scope: space
    columns:
      - name
      - object_name
      - active
      - entry_criteria
      - record_filter
      - description
      - is_system
permission_set:
  user:
    allowCreate: false
    allowDelete: false
    allowEdit: false
    allowRead: false
    modifyAllRecords: false
    viewAllRecords: false
  admin:
    allowCreate: true
    allowDelete: true
    allowEdit: true
    allowRead: true
    modifyAllRecords: true
    viewAllRecords: true