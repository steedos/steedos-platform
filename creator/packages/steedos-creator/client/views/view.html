<template name="creator_view">

	<div class="steedos-brand-band slds-brand-band_medium slds-template_bottom-magnet creator_view">
		<div class="slds-template__container">
			<div class="test-listViewManager slds-grid slds-grid--vertical">
				<div class="slds-page-header">
					<div class="slds-grid">
						<div class="slds-col slds-has-flexi-truncate">
							<div class="slds-media slds-no-space slds-grow">
								<div class="slds-media__figure">
									<span class="slds-icon_container">
										<div class="slds-icon crm-header-icon" style="background-color: #FCB95B">
											<span class="uiImage">
												{{> steedos_icon class="slds-icon slds-page-header__icon" source="standard-sprite" name=object.icon}}
											</span>
										</div>
									</span>
								</div>
								<div class="slds-media__body">
									<nav>
										<ol class="slds-breadcrumb slds-line-height_reset">
											<li class="slds-breadcrumb__item crm-breadcrumb-item">
												<span>{{_ object.label}}</span>
											</li>
										</ol>
									</nav>
									<h1 class="slds-page-header__title slds-text-color--default slds-p-right--x-small crm-header-title">
											<div class="">
												<span class="">{{record.name}}</span>
											</div>
									</h1>
								</div>
							</div>
						</div>
						<div class="slds-col slds-no-flex slds-grid slds-align-middle actionsContainer">
							<div class="slds-button-group" role="group">
								{{#each actions}}
									<li class="slds-button slds-button--neutral slds-truncate list-action-custom">
										<a href="javascript:void(0);" title="{{this.label}}" class="">
											<div class="slds-truncate" title="{{this.label}}">{{this.label}}</div>
										</a>
									</li>
								{{/each}}
								{{#if moreActions}}
									<div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last">
										<button class="slds-button slds-button_icon slds-button_icon-border-filled" data-toggle="dropdown" aria-haspopup="true" title="Show More">
											<svg class="slds-button__icon" aria-hidden="true">
												<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/packages/steedos_lightning-design-system/client/icons/utility-sprite/symbols.svg#down" />
											</svg>
											<span class="slds-assistive-text">Show More</span>
										</button>
										<div class="dropdown-menu dropdown-menu-right crm-header-menu" role="menu">
											<ul class="slds-dropdown__list slds-show">
												 {{#each moreActions}}
													<li class="slds-dropdown__item crm-header-menu-item list-action-custom" role="presentation">
														<a href="javascript:void(0);" title="{{this.label}}" class="" role="option" tabindex="-1">
															<span>{{this.label}}</span>
														</a>
													</li>
												{{/each}}
											</ul>
										</div>
									</div>
								{{/if}}
							</div>
						</div>
					</div>
				</div>
				<br>
				<div class="slds-grid table-grid-content">
					<div class="slds-tabs_card slds-tabs_default creator-view-tabs_default" style="padding: 15px;">
						<ul class="slds-tabs_default__nav" role="tablist">
							<li class="slds-tabs_default__item" title="Item Two" role="presentation">
								<a class="slds-tabs_default__link creator-view-tabs-link" role="tab" tabindex="-1" aria-selected="false" data-tab="creator-tabular">相关</a>
							</li>
							<li class="slds-tabs_default__item slds-is-active" title="Item One" role="presentation">
								<a class="slds-tabs_default__link creator-view-tabs-link" role="tab" tabindex="0" aria-selected="true" data-tab="creator-quick-form">详细信息</a>
							</li>
						</ul>
						<div id="creator-tabular" class="slds-tabs_default__content creator-view-tabs-content slds-hide" role="tabpanel">
							{{#each related_list}}
							<div class="slds-card slds-card_boundary forceRelatedListCardDesktop related-object-tabular">
								<div class="slds-card__header slds-grid">
									<header class="slds-media slds-media_center slds-has-flexi-truncate">
										<div class="slds-media__figure">
											<span class="slds-icon_container slds-icon-standard-contact" title="description of icon when needed">
												{{> steedos_icon class="slds-icon slds-page-header__icon" source="standard-sprite" name=related_object.icon}}
											</span>
										</div>
										<div class="slds-media__body">
											<h2>
												<a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="{{_ related_object.name}}">
													<span class="slds-text-heading_small">{{_ related_object.label}}</span>
													<span class="slds-text-heading--small slds-shrink-none slds-m-right--xx-small" title="{{related_list_count}}"> ({{related_list_count}})</span>
												</a>
											</h2>
										</div>
									</header>
									<div class="slds-no-flex">
										{{#if allowCreate}}
											{{#if this.is_file}}
												<button class="slds-button slds-button_neutral btn-upload-file">
													上传
													<input type="file" name="file" class="ins-file-input upload-file" style="
																							position: absolute;
																							width: 100%;
																							height: 100%;
																							display: inline-block;
																							opacity: 0;
																							top: 0px;
																							left: 0px;
																							z-index: 100;
																							cursor: pointer;
																							overflow: hidden;
																						">
												</button>
											{{else}}
												<button class="slds-button slds-button_neutral add-related-object-record" data-object-name="{{this.object_name}}">{{_ "New"}}</button>
											{{/if}}
										{{/if}}
									</div>
								</div>
								<div class="slds-card__body" style="{{#if related_list_count}}{{else}}display:none;{{/if}}">
									{{> tabular table=this.tabular_table selector=related_selector class="slds-table slds-table_bordered slds-table_resizable-cols slds-table_fixed-layout slds-table_cell-buffer slds-table_edit slds-hint-parent slds-max-medium-table_stacked"}}
								</div>
								<footer class="slds-card__footer">{{relatedCollection}}</footer>
							</div>
							{{/each}}
						</div>
						<div id="creator-quick-form" class="slds-tabs_default__content creator-view-tabs-content slds-show" role="tabpanel">
							{{#if detail_info_visible}}
								{{#if showForm}}
									{{#autoForm collection=collection type="disabled" id="viewRecordForm" schema=schema doc=record}}
										{{#if schemaFields.grouplessFields}}
											{{#each schemaFields.grouplessFields}}
												<div class="slds-grid view-page-section-row">
													{{#each this}}
														<div class="slds-has-flexi-truncate slds-p-horizontal_x-small full view-page-block-item">
															<div class="slds-form-element slds-form-element_edit slds-grow slds-hint-parent slds-p-vertical_xx-small override--slds-form-element uiInput">
																{{#if this}}
																	<div class="test-id__field-label-container">
																		<span class="test-id__field-label slds-form-element__label">{{label this}}</span>
																	</div>
																	<div class="slds-form-element__control slds-grid itemBody">
																		<span class="test-id__field-value slds-form-element__static slds-grow">
																			{{> creator_table_cell _id=record._id val=(keyValue this) doc=record field=(keyField this) field_name=this object_name=object_name disabled=true}}
																		</span>
																	</div>
																{{/if}}
															</div>
														</div>
													{{/each}}
												</div>
											{{/each}}
										{{/if}}

										{{#if schemaFields.groupFields}}
											{{#each schemaFields.groupFields}}
												{{#if this.fields}}
													<div class="slds-section slds-is-open group-section">
														<h3 class="slds-section__title group-section-control">
															<button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action">
															{{> steedos_icon class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" source="utility-sprite" name="switch"}}
															<span class="slds-truncate" title="{{this.name}}">{{this.name}}</span>
															</button>
														</h3>
														<div aria-hidden="false" class="slds-section__content" id="expando-unique-id">
															{{#each this.fields}}
																<div class="slds-grid view-page-section-row">
																	{{#each this}}
																		<div class="slds-has-flexi-truncate slds-p-horizontal_x-small full view-page-block-item">
																			<div class="slds-form-element slds-form-element_edit slds-grow slds-hint-parent slds-p-vertical_xx-small override--slds-form-element uiInput">
																				{{#if this}}
																					<div class="test-id__field-label-container">
																						<span class="test-id__field-label slds-form-element__label">{{label this}}</span>
																					</div>
																					<div class="slds-form-element__control slds-grid itemBody">
																						<span class="test-id__field-value slds-form-element__static slds-grow">
																							{{> creator_table_cell _id=record._id val=(keyValue this) doc=record field=(keyField this) field_name=this object_name=object_name disabled=true}}
																						</span>
																					</div>
																				{{/if}}
																			</div>
																		</div>
																	{{/each}}
																</div>
															{{/each}}
														</div>
													</div>
												{{/if}}
											{{/each}}
										{{/if}}

									{{/autoForm}}
								{{/if}}
							{{/if}}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	{{#afModal class="btn btn-primary related-object-new hidden" collection=related_collection operation="insert" dialogClass="modal-lg modal-body-zoom.includes" buttonContent=updateButtonContent saveAndInsert=true collectionName=collectionName}} {{_ "Insert"}} {{/afModal}}

	{{#afModal class="btn btn-primary related-object-cell-edit hidden" collection=editCollection fields=editFields operation="update" dialogClass="modal-lg modal-body-zoom.includes" buttonContent=updateButtonContent collectionName=collectionName}} {{_ "Edit"}} {{/afModal}}

	{{#afModal class="btn btn-primary related-object-row-edit hidden" collection=editCollection doc=doc operation="update" dialogClass="modal-lg modal-body-zoom.includes" buttonContent=updateButtonContent saveAndInsert=true collectionName=collectionName}} {{_ "Edit"}} {{/afModal}}

	{{#afModal class="btn btn-primary creator-record-edit hidden" collection=collection doc=record._id operation="update" dialogClass="modal-lg modal-body-zoom.includes" buttonContent=updateButtonContent saveAndInsert=true collectionName=collectionName}} {{_ "Edit"}} {{/afModal}}
</template>
